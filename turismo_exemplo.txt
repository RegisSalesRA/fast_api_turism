app/
â”‚
â”œâ”€â”€ core/                         
â”‚   â”œâ”€â”€ config.py                  # ConfiguraÃ§Ãµes do app (env, DB, etc.)
â”‚   â”œâ”€â”€ exceptions.py              # ExceÃ§Ãµes e handlers globais
â”‚   â”œâ”€â”€ security.py                # Esqueleto de auth/JWT (pronto para futura implementaÃ§Ã£o)
â”‚   â””â”€â”€ dependencies.py            # DependÃªncias globais (injeÃ§Ã£o de services, db, etc.)
â”‚
â”œâ”€â”€ domain/                        
â”‚   â”œâ”€â”€ entities/                  
â”‚   â”‚   â”œâ”€â”€ ponto_turistico.py     # Entidade PontoTuristico
â”‚   â”‚   â”œâ”€â”€ cidade.py              # Entidade Cidade
â”‚   â”‚   â””â”€â”€ categoria.py           # Entidade Categoria
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/              
â”‚   â”‚   â”œâ”€â”€ ponto_repository.py    # Interface do repositÃ³rio de Pontos
â”‚   â”‚   â”œâ”€â”€ cidade_repository.py   # Interface do repositÃ³rio de Cidades
â”‚   â”‚   â””â”€â”€ categoria_repository.py# Interface do repositÃ³rio de Categorias
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                  
â”‚   â”‚   â”œâ”€â”€ ponto/                 
â”‚   â”‚   â”‚   â”œâ”€â”€ create_ponto.py
â”‚   â”‚   â”‚   â”œâ”€â”€ list_pontos.py
â”‚   â”‚   â”‚   â”œâ”€â”€ update_ponto.py
â”‚   â”‚   â”‚   â”œâ”€â”€ delete_ponto.py
â”‚   â”‚   â”‚   â””â”€â”€ search_pontos.py  # Busca por nome, filtros combinados
â”‚   â”‚   â””â”€â”€ categoria/             
â”‚   â”‚       â””â”€â”€ list_categorias.py
â”‚   â”‚
â”‚   â””â”€â”€ value_objects/             
â”‚       â””â”€â”€ nota.py                # Valor imutÃ¡vel para nota, validaÃ§Ã£o
â”‚
â”œâ”€â”€ infrastructure/                
â”‚   â”œâ”€â”€ database/                  
â”‚   â”‚   â”œâ”€â”€ models/                
â”‚   â”‚   â”‚   â”œâ”€â”€ ponto_model.py
â”‚   â”‚   â”‚   â”œâ”€â”€ cidade_model.py
â”‚   â”‚   â”‚   â””â”€â”€ categoria_model.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ repositories/          # ImplementaÃ§Ãµes concretas dos repositÃ³rios
â”‚   â”‚       â”œâ”€â”€ ponto_repository_impl.py
â”‚   â”‚       â”œâ”€â”€ cidade_repository_impl.py
â”‚   â”‚       â””â”€â”€ categoria_repository_impl.py
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                       
â”‚   â”‚   â”œâ”€â”€ routers/               
â”‚   â”‚   â”‚   â”œâ”€â”€ ponto_router.py
â”‚   â”‚   â”‚   â”œâ”€â”€ cidade_router.py
â”‚   â”‚   â”‚   â””â”€â”€ categoria_router.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ schemas/               
â”‚   â”‚   â”‚   â”œâ”€â”€ requests/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create_ponto.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ update_ponto.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ create_categoria.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ responses/
â”‚   â”‚   â”‚       â”œâ”€â”€ ponto_detail.py
â”‚   â”‚   â”‚       â”œâ”€â”€ ponto_list.py
â”‚   â”‚   â”‚       â””â”€â”€ categoria_list.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ dependencies.py        # InjeÃ§Ã£o de services para as rotas
â”‚   â”‚
â”‚   â”œâ”€â”€ clients/                   
â”‚   â”‚   â””â”€â”€ external_client.py     # IntegraÃ§Ãµes externas (opcional)
â”‚   â”‚
â”‚   â””â”€â”€ mappers/                   
â”‚       â”œâ”€â”€ ponto_mapper.py
â”‚       â”œâ”€â”€ cidade_mapper.py
â”‚       â””â”€â”€ categoria_mapper.py
â”‚
â”œâ”€â”€ tests/                         
â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”œâ”€â”€ ponto/
â”‚   â”‚   â””â”€â”€ categoria/
â”‚   â”œâ”€â”€ infrastructure/
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â”œâ”€â”€ routers/
â”‚   â”‚       â””â”€â”€ schemas/
â”‚   â””â”€â”€ integration/
â”‚
â””â”€â”€ main.py                        # InicializaÃ§Ã£o FastAPI





1ï¸âƒ£ api/ â€“ Camada de Entrada (Interface HTTP)

Essa Ã© a porta de entrada da aplicaÃ§Ã£o, onde o FastAPI interage com o mundo externo (clientes, frontend, Postman, etc.). Tudo que envolve requisitar dados via HTTP fica aqui.

ğŸ”¹ routers/

FunÃ§Ã£o: definir os endpoints da API.

Ã‰ equivalente a views ou controllers em Django.

Cada domÃ­nio do sistema geralmente tem seu prÃ³prio router (ponto_router, cidade_routerâ€¦), facilitando modularidade e manutenÃ§Ã£o.

Aqui vocÃª define:

Rotas (GET, POST, PUT, DELETE)

ParÃ¢metros de URL

Status codes (200, 201, 404â€¦)

Chamadas aos services do domÃ­nio (lÃ³gica de negÃ³cio)

ğŸ”¹ schemas/

FunÃ§Ã£o: definir estruturas de dados que entram e saem da API.

SÃ£o DTOs (Data Transfer Objects), nÃ£o tÃªm lÃ³gica de negÃ³cio.

SeparaÃ§Ã£o comum:

requests/ â†’ dados que o cliente envia (input)

responses/ â†’ dados que o servidor devolve (output)

Ajuda a validar dados automaticamente com Pydantic e manter o domÃ­nio isolado do HTTP.

ğŸ”¹ dependencies.py

FunÃ§Ã£o: centralizar injeÃ§Ã£o de dependÃªncias nas rotas.

Por exemplo: criar instÃ¢ncias de services, repositÃ³rios ou clients para serem usadas nos endpoints.

MantÃ©m os routers limpos, sem precisar criar objetos diretamente dentro das funÃ§Ãµes de rota.

ğŸ”¹ clients/

FunÃ§Ã£o: lidar com integraÃ§Ãµes externas, como:

APIs de terceiros

Filas (RabbitMQ, Kafka)

ServiÃ§os HTTP externos

Garante que o domÃ­nio nÃ£o dependa de detalhes de implementaÃ§Ã£o externa (separaÃ§Ã£o de preocupaÃ§Ãµes).

Exemplo: um client para buscar dados de um serviÃ§o externo de previsÃ£o do tempo para o ponto turÃ­stico.

ğŸ”¹ mappers/

FunÃ§Ã£o: converter dados entre camadas:

Entidades do domÃ­nio â†” Models do banco â†” Schemas do FastAPI

MantÃ©m o domÃ­nio puro, sem dependÃªncia de FastAPI ou SQLAlchemy.

Evita lÃ³gica de conversÃ£o espalhada pelos serviÃ§os ou routers.

2ï¸âƒ£ database/ â€“ PersistÃªncia de Dados

Essa pasta Ã© onde tudo relacionado ao banco de dados acontece. Ela Ã© parte da infraestrutura, ou seja, detalhes tÃ©cnicos que implementam os contratos definidos no domÃ­nio.

ğŸ”¹ models/

FunÃ§Ã£o: definir estruturas do banco usando SQLAlchemy (ou outro ORM).

Cada entidade do domÃ­nio geralmente tem um model correspondente.

NÃ£o contÃ©m regras de negÃ³cio, apenas mapeamento de dados e relacionamento (1:N, N:N).

ğŸ”¹ repositories/

FunÃ§Ã£o: implementar os contratos definidos em domain/repositories.

Cada repository Ã© responsÃ¡vel por:

CRUD no banco

Consultas complexas

Filtragens especÃ­ficas

MantÃ©m o domÃ­nio independente de detalhes de banco.

Exemplo: ponto_repository_impl.py implementa PontoRepository definido no domÃ­nio.

ğŸ”¹ Resumo da lÃ³gica de fluxo

Cliente faz requisiÃ§Ã£o HTTP â†’ rota do router

Router valida dados com schemas/requests

Router chama service do domÃ­nio (domain/services)

Regras de negÃ³cio puras

Service chama repository (database/repositories) para ler/escrever no banco

Dados do banco passam pelo mapper para virar entidade de domÃ­nio

Router devolve response usando schemas/responses

Middleware, dependencies e clients podem atuar em qualquer ponto, sem bagunÃ§ar domÃ­nio

ğŸ’¡ Dicas de boas prÃ¡ticas FastAPI + Clean Architecture:

Routers â†’ sÃ³ controlam o fluxo HTTP

Schemas â†’ sÃ³ definem dados (validaÃ§Ã£o)

Dependencies â†’ injeÃ§Ã£o de services/repositories

Clients â†’ serviÃ§os externos

Mappers â†’ conversÃ£o de dados

Database/Models â†’ estrutura fÃ­sica do banco

Database/Repositories â†’ persistÃªncia e consultas complexas
